{"ast":null,"code":"var _jsxFileName = \"F:\\\\jokeapp-withreact\\\\src\\\\JokeList.js\";\nimport React, { Component } from \"react\";\nimport Joke from \"./Joke\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from 'uuid';\nimport \"./JokeList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass JokeList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      jokes: JSON.parse(window.localStorage.getItem(\"jokes\") || \"[]\"),\n      loading: false\n    };\n    this.seenJokes = new Set(this.state.jokes.map(j => j.text));\n    console.log(this.seenJokes);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.state.jokes.length === 0) this.getJokes();\n  }\n\n  async getJokes() {\n    try {\n      let jokes = [];\n\n      while (jokes.length < this.props.numJokesToGet) {\n        let res = await axios.get(\"https://icanhazdadjoke.com/\", {\n          headers: {\n            Accept: \"application/json\"\n          }\n        });\n        let newJoke = res.data.joke;\n\n        if (!this.seenJokes.has(newJoke)) {\n          jokes.push({\n            id: uuidv4(),\n            text: newJoke,\n            votes: 0\n          });\n        } else {\n          console.log(\"FOUND A DUPLICATE!\");\n          console.log(newJoke);\n        }\n      }\n\n      this.setState(st => ({\n        loading: false,\n        jokes: [...st.jokes, ...jokes]\n      }), () => window.localStorage.setItem(\"jokes\", JSON.stringify(this.state.jokes)));\n    } catch (e) {\n      alert(e);\n      this.setState({\n        loading: false\n      });\n    }\n  }\n\n  handleVote(id, delta) {\n    this.setState(st => ({\n      jokes: st.jokes.map(j => j.id === id ? { ...j,\n        votes: j.votes + delta\n      } : j)\n    }), () => window.localStorage.setItem(\"jokes\", JSON.stringify(this.state.jokes)));\n  }\n\n  handleClick() {\n    this.setState({\n      loading: true\n    }, this.getJokes);\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"JokeList-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-8x fa-laugh fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"JokeList-title\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this);\n    }\n\n    let jokes = this.state.jokes.sort((a, b) => b.votes - a.votes);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"JokeList\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"JokeList-sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"JokeList-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Dad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), \" Jokes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"JokeList-getmore\",\n          onClick: this.handleClick,\n          children: \"Fetch Jokes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"JokeList-jokes\",\n        children: jokes.map(j => /*#__PURE__*/_jsxDEV(Joke, {\n          votes: j.votes,\n          text: j.text,\n          upvote: () => this.handleVote(j.id, 1),\n          downvote: () => this.handleVote(j.id, -1)\n        }, j.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nJokeList.defaultProps = {\n  numJokesToGet: 10\n};\nexport default JokeList;","map":{"version":3,"sources":["F:/jokeapp-withreact/src/JokeList.js"],"names":["React","Component","Joke","axios","v4","uuidv4","JokeList","constructor","props","state","jokes","JSON","parse","window","localStorage","getItem","loading","seenJokes","Set","map","j","text","console","log","handleClick","bind","componentDidMount","length","getJokes","numJokesToGet","res","get","headers","Accept","newJoke","data","joke","has","push","id","votes","setState","st","setItem","stringify","e","alert","handleVote","delta","render","sort","a","b","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Joke from \"./Joke\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from 'uuid';\nimport \"./JokeList.css\";\n\nclass JokeList extends Component {\n  static defaultProps = {\n    numJokesToGet: 10\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      jokes: JSON.parse(window.localStorage.getItem(\"jokes\") || \"[]\"),\n      loading: false\n    };\n    this.seenJokes = new Set(this.state.jokes.map(j => j.text));\n    console.log(this.seenJokes);\n    this.handleClick = this.handleClick.bind(this);\n  }\n  componentDidMount() {\n    if (this.state.jokes.length === 0) this.getJokes();\n  }\n  async getJokes() {\n    try {\n      let jokes = [];\n      while (jokes.length < this.props.numJokesToGet) {\n        let res = await axios.get(\"https://icanhazdadjoke.com/\", {\n          headers: { Accept: \"application/json\" }\n        });\n        let newJoke = res.data.joke;\n        if (!this.seenJokes.has(newJoke)) {\n          jokes.push({ id:uuidv4(), text: newJoke, votes: 0 });\n        } else {\n          console.log(\"FOUND A DUPLICATE!\");\n          console.log(newJoke);\n        }\n      }\n      this.setState(\n        st => ({\n          loading: false,\n          jokes: [...st.jokes, ...jokes]\n        }),\n        () =>\n          window.localStorage.setItem(\"jokes\", JSON.stringify(this.state.jokes))\n      );\n    } catch (e) {\n      alert(e);\n      this.setState({ loading: false });\n    }\n  }\n  handleVote(id, delta) {\n    this.setState(\n      st => ({\n        jokes: st.jokes.map(j =>\n          j.id === id ? { ...j, votes: j.votes + delta } : j\n        )\n      }),\n      () =>\n        window.localStorage.setItem(\"jokes\", JSON.stringify(this.state.jokes))\n    );\n  }\n  handleClick() {\n    this.setState({ loading: true }, this.getJokes);\n  }\n  render() {\n    if (this.state.loading) {\n      return (\n        <div className='JokeList-spinner'>\n          <i className='far fa-8x fa-laugh fa-spin' />\n          <h1 className='JokeList-title'>Loading...</h1>\n        </div>\n      );\n    }\n    let jokes = this.state.jokes.sort((a, b) => b.votes - a.votes);\n    return (\n      <div className='JokeList'>\n        <div className='JokeList-sidebar'>\n          <h1 className='JokeList-title'>\n            <span>Dad</span> Jokes\n          </h1>\n          <img src='https://assets.dryicons.com/uploads/icon/svg/8927/0eb14c71-38f2-433a-bfc8-23d9c99b3647.svg' />\n          <button className='JokeList-getmore' onClick={this.handleClick}>\n            Fetch Jokes\n          </button>\n        </div>\n\n        <div className='JokeList-jokes'>\n          {jokes.map(j => (\n            <Joke\n              key={j.id}\n              votes={j.votes}\n              text={j.text}\n              upvote={() => this.handleVote(j.id, 1)}\n              downvote={() => this.handleVote(j.id, -1)}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\nexport default JokeList;\n"]},"metadata":{},"sourceType":"module"}